!function(){var t={version:"v2.0.7"};t.observable=function(t){t=t||{};var e={};return t.on=function(n,r){return"function"==typeof r&&n.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(r),r.typed=n>0}),t},t.off=function(n,r){if("*"==n)e={};else if(r)for(var o,i=e[n],a=0;o=i&&i[a];++a)o==r&&(i.splice(a,1),a--);else n.replace(/\S+/g,function(t){e[t]=[]});return t},t.one=function(e,n){return n&&(n.one=1),t.on(e,n)},t.trigger=function(n){for(var r,o=[].slice.call(arguments,1),i=e[n]||[],a=0;r=i[a];++a)r.busy||(r.busy=1,r.apply(t,r.typed?[n].concat(o):o),r.one?(i.splice(a,1),a--):i[a]!==r&&a--,r.busy=0);return t},t},function(t,e){function n(){return i.hash.slice(1)}function r(t){return t.split("/")}function o(t){t.type&&(t=n()),t!=s&&(a.trigger.apply(null,["H"].concat(r(t))),s=t)}if(this.top){var i=location,a=t.observable(),s=n(),u=window,c=t.route=function(t){t[0]?(i.hash=t,o(t)):a.on("H",t)};c.exec=function(t){t.apply(null,r(n()))},c.parser=function(t){r=t},u.addEventListener?u.addEventListener(e,o,!1):u.attachEvent("on"+e,o)}}(t,"hashchange"),t._tmpl=function(){function t(t,n){return n=(t||"{}").replace(/\\{/g,"￰").replace(/\\}/g,"￱").split(/({[\s\S]*?})/),new Function("d","return "+(n[0]||n[2]?"["+n.map(function(t,n){return n%2?e(t,1):'"'+t.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':e(n[1])).replace(/\uFFF0/g,"{").replace(/\uFFF1/g,"}"))}function e(t,e){return t=t.replace(/\n/g," ").replace(/^[{ ]+|[ }]+$|\/\*.+?\*\//g,""),/^\s*[\w-"']+ *:/.test(t)?"["+t.replace(/\W*([\w-]+)\W*:([^,]+)/g,function(t,r,o){return o.replace(/\w[^,|& ]*/g,function(t){return n(t,e)})+'?"'+r+'":"",'})+'].join(" ")':n(t,e)}function n(t,e){return"(function(v){try{v="+(t.replace(o,function(t,e,n){return n?"d."+n:t})||"x")+"}finally{return "+(e?'!v&&v!==0?"":v':"v")+"}}).call(d)"}var r={},o=/("|').+?[^\\]\1|\.\w*|\w*:|\b(?:this|true|false|null|undefined|new|typeof|Number|String|Object|Array|Math|Date|JSON)\b|([a-z_]\w*)/gi;return function(e,n){return e&&(r[e]=r[e]||t(e))(n)}}(),function(t,e){function n(t,e){for(var n=0;n<(t||[]).length;n++)e(t[n],n)===!1&&n--}function r(t,e){return e&&Object.keys(e).map(function(n){t[n]=e[n]}),t}function o(t,e){return t.filter(function(t){return e.indexOf(t)<0})}function i(t,e){for(t=e(t)===!1?t.nextSibling:t.firstChild;t;)i(t,e),t=t.nextSibling}function a(t){var e=t.trim().slice(1,3).toLowerCase(),n=/td|th/.test(e)?"tr":"tr"==e?"tbody":"div";return el=d.createElement(n),el.innerHTML=t,el}function s(t,e){e.trigger("update"),n(t,function(t){function n(t){o.removeAttribute(t)}var r=t.tag,o=t.dom;if(t.loop)return n("each"),f(t,e);if(r)return r.update?r.update():t.tag=c({tmpl:r[0],fn:r[1],root:o,parent:e});var i=t.attr,a=l(t.expr,e);if(null==a&&(a=""),t.value!==a){if(t.value=a,!i)return o.nodeValue=a;if((!a&&t.bool||/obj|func/.test(typeof a))&&n(i),"function"==typeof a)o[i]=function(t){t=t||window.event,t.which=t.which||t.charCode||t.keyCode,t.target=t.target||t.srcElement,t.currentTarget=o,t.item=e.__item||e,a.call(e,t)!==!0&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),e.update()};else if(/^(show|hide|if)$/.test(i))n(i),"hide"==i&&(a=!a),o.style.display=a?"":"none";else{if(t.bool){if(o[i]=a,!a)return;a=i}o.setAttribute(i,a)}}}),e.trigger("updated")}function u(t){function e(t,e,n){if(e?e.indexOf("{")>=0:n){var o={dom:t,expr:e};a.push(r(o,n||{}))}}var o={},a=[];return i(t,function(t){var r=t.nodeType,i=t.nodeValue;if(3==r&&"STYLE"!=t.parentNode.tagName)e(t,i);else if(1==r){if(i=t.getAttribute("each"))return e(t,i,{loop:1}),!1;var a=h[t.tagName.toLowerCase()];n(t.attributes,function(n){var r=n.name,i=n.value;if(/^(name|id)$/.test(r)&&(o[i]=t),!a){var s=r.split("__")[1];if(e(t,i,{attr:s||r,bool:s}),s)return t.removeAttribute(r),!1}}),a&&e(t,0,{tag:a})}}),{expr:a,elem:o}}function c(e){function o(){Object.keys(y).map(function(t){var e=i[t]=l(y[t],h||m);"object"==typeof e&&f.removeAttribute(t)})}var i=e.opts||{},c=a(e.tmpl),f=e.root,h=e.parent,g=u(c),m={root:f,opts:i,parent:h,__item:e.item},y={};for(r(m,g.elem),n(f.attributes,function(t){y[t.name]=t.value}),o(),m.on||(t.observable(m),delete m.off),e.fn&&e.fn.call(m,i),m.update=function(t,e){return h&&c&&!c.firstChild&&(f=h.root,c=null),e||d.body.contains(f)?(r(m,t),r(m,m.__item),o(),s(g.expr,m),!e&&m.__item&&h.update(),!0):void m.trigger("unmount")},m.update(0,!0);c.firstChild;)e.before?f.insertBefore(c.firstChild,e.before):f.appendChild(c.firstChild);return m.trigger("mount"),p.push(m),m}function f(t,e){function n(){return Array.prototype.indexOf.call(u.childNodes,s)+1}if(!t.done){t.done=!0;var r,i,a=t.dom,s=a.previousSibling,u=a.parentNode,f=a.outerHTML,p=t.expr,h=p.split(/\s+in\s+/),d=[];h[1]&&(p="{ "+h[1],i=h[0].slice(1).trim().split(/,\s*/)),e.one("mount",function(){var t=a.parentNode;t&&(u=t,u.removeChild(a))}),e.on("updated",function(){var t=l(p,e);if(is_array=Array.isArray(t),is_array)t=t.slice(0);else{if(!t)return;var a=JSON.stringify(t);if(a==r)return;r=a,t=Object.keys(t).map(function(e){var n={};return n[i[0]]=e,n[i[1]]=t[e],n})}o(d,t).map(function(t){var e=d.indexOf(t);u.removeChild(u.childNodes[n()+e]),d.splice(e,1)}),o(t,d).map(function(o){var a=t.indexOf(o);if(i&&!r){var s={};s[i[0]]=o,s[i[1]]=a,o=s}var l=c({before:u.childNodes[n()+a],parent:e,tmpl:f,item:o,root:u});e.on("update",function(){l.update(0,!0)})}),d=t})}}if(e){var l=t._tmpl,p=[],h={},d=document;t.tag=function(t,e,n){n=n||noop,h[t]=[e,n]},t.mountTo=function(t,e,n){var r=h[e];return r&&c({tmpl:r[0],fn:r[1],root:t,opts:n})},t.mount=function(e,r){"*"==e&&(e=Object.keys(h).join(", "));var o=[];return n(d.querySelectorAll(e),function(e){if(!e.riot){var n=e.tagName.toLowerCase(),i=t.mountTo(e,n,r);i&&(o.push(i),e.riot=1)}}),o},t.update=function(){return p=p.filter(function(t){return!!t.update()})}}}(t,this.top),"object"==typeof exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):this.riot=t}(),!function(){"use strict";var t=["html","json","jsonp","script"],e=["connect","delete","get","head","options","patch","post","put","trace"],n=function i(){var t={},e={},n={url:function(t){return s.call(this,"url",t,r.string)},sync:function(t){return s.call(this,"sync",t,r.bool)},cache:function(t){return s.call(this,"cache",t,r.bool)},type:function(t){return s.call(this,"type",t,r.type)},header:function(e,n){return t.headers=t.headers||{},r.string(e),"undefined"!=typeof n?(r.string(n),t.headers[e]=n,this):t.headers[e]},auth:function(e,n){return r.string(e),r.string(n),t.auth={user:e,passwd:n},this},method:function(t){return s.call(this,"method",t,r.method,function(t){return"post"===t.toLowerCase()&&this.header("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),t})},queryString:function(t){return s.call(this,"queryString",t,r.queryString)},data:function(t){return s.call(this,"data",t,r.plainObject)},body:function(t){return s.call(this,"body",t,null,function(t){if("object"==typeof t){if(!(t instanceof FormData)){try{t=JSON.stringify(t)}catch(e){throw new TypeError("Unable to stringify body's content : "+e.name)}this.header("Content-Type","application/json")}}else t+="";return t})},into:function(t){return s.call(this,"into",t,r.selector,function(t){return"string"==typeof t?document.querySelectorAll(t):t instanceof HTMLElement?[t]:void 0})},jsonPaddingName:function(t){return s.call(this,"jsonPaddingName",t,r.string)},jsonPadding:function(t){return s.call(this,"jsonPadding",t,r.func)},on:function(t,n){return"function"==typeof n&&(e[t]=e[t]||[],e[t].push(n)),this},off:function(t){return e[t]=[],this},trigger:function(t,n){var r=this,o=function(t,n){e[t]instanceof Array&&e[t].forEach(function(t){t.call(r,n)})};if("undefined"!=typeof t){t+="";var i=/^([0-9])([0-9x])([0-9x])$/i,a=t.match(i);a&&a.length>3?Object.keys(e).forEach(function(t){var e=t.match(i);!(e&&e.length>3&&a[1]===e[1])||"x"!==e[2]&&a[2]!==e[2]||"x"!==e[3]&&a[3]!==e[3]||o(t,n)}):e[t]&&o(t,n)}return this},go:function(){var e=t.type||(t.into?"html":"json"),n=c();return"function"==typeof a[e]?a[e].call(this,n):void 0}},a={json:function(t){var e=this;a._xhr.call(this,t,function(t){try{t=JSON.parse(t)}catch(n){return e.trigger("error",n),null}return t})},html:function(e){a._xhr.call(this,e,function(e){return t.into&&t.into.length&&t.into.forEach(function(t){t.innerHTML=e}),e})},_xhr:function(e,n){var r,o,i,a=this,s=t.method||"get",c=t.sync!==!0,f=new XMLHttpRequest,l=t.data,p=t.body;if(l&&u()){"string"!=typeof p&&(p="");for(r in l)p+=r+"="+l[r]+"\n\r"}if(i=[s,e,c],t.auth&&(i.push(t.auth.user),i.push(t.auth.passwd)),f.open.apply(f,i),t.headers)for(o in t.headers)f.setRequestHeader(o,t.headers[o]);f.onprogress=function(t){t.lengthComputable&&a.trigger("progress",t.loaded/t.total)},f.onload=function(){var t=f.responseText;this.status>=200&&this.status<300&&("function"==typeof n&&(t=n(t)),a.trigger("success",t)),a.trigger(this.status,t),a.trigger("end",t)},f.onerror=function(t){a.trigger("error",t,arguments)},f.send(p)},jsonp:function(e){var n,r=this,a=document.querySelector("head"),s=t.sync!==!0,u=t.jsonPaddingName||"callback",c=t.jsonPadding||"_padd"+(new Date).getTime()+Math.floor(1e4*Math.random()),f={};if(i[c])throw new Error("Padding "+c+"  already exists. It must be unique.");/^ajajsonp_/.test(c)||(c="ajajsonp_"+c),window[c]=function(t){r.trigger("success",t),a.removeChild(n),window[c]=void 0},f[u]=c,e=o(e,f),n=document.createElement("script"),n.async=s,n.src=e,n.onerror=function(){r.trigger("error",arguments),a.removeChild(n),window[c]=void 0},a.appendChild(n)},script:function(e){var n,r=this,o=document.querySelector("head")||document.querySelector("body"),i=t.sync!==!0;if(!o)throw new Error("Ok, wait a second, you want to load a script, but you don't have at least a head or body tag...");n=document.createElement("script"),n.async=i,n.src=e,n.onerror=function(){r.trigger("error",arguments),o.removeChild(n)},n.onload=function(){r.trigger("success",arguments)},o.appendChild(n)}},s=function(e,n,o,i){if("undefined"!=typeof n){if("function"==typeof o)try{n=o.call(r,n)}catch(a){throw new TypeError("Failed to set "+e+" : "+a.message)}return t[e]="function"==typeof i?i.call(this,n):n,this}return"undefined"===t[e]?null:t[e]},u=function(){return["delete","patch","post","put"].indexOf(t.method)>-1},c=function(){var e=t.url,n="undefined"!=typeof t.cache?!!t.cache:!0,r=t.queryString,i=t.data;return n===!1&&(r+="ajabuster="+(new Date).getTime()),e=o(e,r),i&&!u()&&(e=o(e,i)),e};return n},r={bool:function(t){return!!t},string:function(t){if("string"!=typeof t)throw new TypeError("a string is expected, but "+t+" ["+typeof t+"] given");return t},plainObject:function(t){if("object"!=typeof t||t.constructor!==Object)throw new TypeError("an object is expected, but "+t+"  ["+typeof t+"] given");return t},type:function(e){if(e=this.string(e),t.indexOf(e.toLowerCase())<0)throw new TypeError("a type in ["+t.join(", ")+"] is expected, but "+e+" given");return e.toLowerCase()},method:function(t){if(t=this.string(t),e.indexOf(t.toLowerCase())<0)throw new TypeError("a method in ["+e.join(", ")+"] is expected, but "+t+" given");return t.toLowerCase()},queryString:function(t){var e={};return"string"==typeof t?t.replace("?","").split("&").forEach(function(t){var n=t.split("=");2===n.length&&(e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]))}):e=t,this.plainObject(e)},selector:function(t){if("string"!=typeof t&&!(t instanceof HTMLElement))throw new TypeError("a selector or an HTMLElement is expected, "+t+" ["+typeof t+"] given");return t},func:function(t){if(t=this.string(t),!/^([a-zA-Z_])([a-zA-Z0-9_\-])+$/.test(t))throw new TypeError("a valid function name is expected, "+t+" ["+typeof t+"] given");return t}},o=function(t,e){var n;if(t=t||"",e){-1===t.indexOf("?")&&(t+="?");for(n in e)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e[n])}return t};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof exports?module.exports=n:window.aja=window.aja||n}(),!function(t){function e(t,n){this.list=t,this.options=n=n||{};var r,o,i,a;for(r=0,a=["sort","includeScore","shouldSort"],o=a.length;o>r;r++)i=a[r],this.options[i]=i in n?n[i]:e.defaultOptions[i];for(r=0,a=["searchFn","sortFn","keys","getFn"],o=a.length;o>r;r++)i=a[r],this.options[i]=n[i]||e.defaultOptions[i]}var n=function(t,e){if(e=e||{},this.options=e,this.options.location=e.location||n.defaultOptions.location,this.options.distance="distance"in e?e.distance:n.defaultOptions.distance,this.options.threshold="threshold"in e?e.threshold:n.defaultOptions.threshold,this.options.maxPatternLength=e.maxPatternLength||n.defaultOptions.maxPatternLength,this.pattern=e.caseSensitive?t:t.toLowerCase(),this.patternLen=t.length,this.patternLen>this.options.maxPatternLength)throw new Error("Pattern length is too long");this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet()};n.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},n.prototype._calculatePatternAlphabet=function(){var t={},e=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]|=1<<this.pattern.length-e-1;return t},n.prototype._bitapScore=function(t,e){var n=t/this.patternLen,r=Math.abs(this.options.location-e);return this.options.distance?n+r/this.options.distance:r?1:n},n.prototype.search=function(t){if(t=this.options.caseSensitive?t:t.toLowerCase(),this.pattern===t)return{isMatch:!0,score:0};var e,n,r,o,i,a,s,u,c,f=t.length,l=this.options.location,p=this.options.threshold,h=t.indexOf(this.pattern,l),d=this.patternLen+f,g=1,m=[];for(-1!=h&&(p=Math.min(this._bitapScore(0,h),p),h=t.lastIndexOf(this.pattern,l+this.patternLen),-1!=h&&(p=Math.min(this._bitapScore(0,h),p))),h=-1,e=0;e<this.patternLen;e++){for(r=0,o=d;o>r;)this._bitapScore(e,l+o)<=p?r=o:d=o,o=Math.floor((d-r)/2+r);for(d=o,i=Math.max(1,l-o+1),a=Math.min(l+o,f)+this.patternLen,s=Array(a+2),s[a+1]=(1<<e)-1,n=a;n>=i;n--)if(c=this.patternAlphabet[t.charAt(n-1)],s[n]=0===e?(s[n+1]<<1|1)&c:(s[n+1]<<1|1)&c|((u[n+1]|u[n])<<1|1)|u[n+1],s[n]&this.matchmask&&(g=this._bitapScore(e,n-1),p>=g)){if(p=g,h=n-1,m.push(h),!(h>l))break;i=Math.max(1,2*l-h)}if(this._bitapScore(e+1,l)>p)break;u=s}return{isMatch:h>=0,score:g}};var r=function(t,e,n){var i,a,s;if(e){s=e.indexOf("."),-1!==s?(i=e.slice(0,s),a=e.slice(s+1)):i=e;var u=t[i];if(u)if(a||"string"!=typeof u&&"number"!=typeof u)if(o.isArray(u))for(var c=0,f=u.length;f>c;c++)r(u[c],a,n);else a&&r(u,a,n);else n.push(u)}else n.push(t);return n},o={deepValue:function(t,e){return r(t,e,[])},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}};e.defaultOptions={id:null,caseSensitive:!1,includeScore:!1,shouldSort:!0,searchFn:n,sortFn:function(t,e){return t.score-e.score},getFn:o.deepValue,keys:[]},e.prototype.search=function(t){var e,n,r,i,a=new this.options.searchFn(t,this.options),s=this.list,u=s.length,c=this.options,f=this.options.keys,l=f.length,p=[],h={},d=[],g=function(t,e,n){if(void 0!==t&&null!==t)if("string"==typeof t)r=a.search(t),r.isMatch&&(i=h[n],i?i.score=Math.min(i.score,r.score):(h[n]={item:e,score:r.score},p.push(h[n])));else if(o.isArray(t))for(var s=0;s<t.length;s++)g(t[s],e,n)};if("string"==typeof s[0])for(var m=0;u>m;m++)g(s[m],m,m);else for(var m=0;u>m;m++)for(n=s[m],e=0;l>e;e++)g(c.getFn(n,f[e]),n,m);c.shouldSort&&p.sort(c.sortFn);for(var y=c.includeScore?function(t){return p[t]}:function(t){return p[t].item},v=c.id?function(t){p[t].item=c.getFn(p[t].item,c.id)[0]}:function(){},m=0,b=p.length;b>m;m++)v(m),d.push(y(m));return d},"object"==typeof exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.Fuse=e}(this),riot.tag("emojis",'<div id="info" if="{ current }"><p onclick="{ copy }" class="current-container"><span class="emo emoji v-align s_{ current.name.replace(/\\+/, &quot;&quot;) }"></span><input id="currentInput" value=":{ current.name }:" class="v-align"></p><p><span class="tag tag-blue">{ current.unicode }</span><span each="{ key in current.keywords }" class="tag tag-green">{ key }</span><a href="https://github.com/jgsme/emo/edit/master/src/data/emojis.custom.ja.json"><span class="tag tag-red">Add new one?</span></a></p></div><span each="{ emoji in emojis }" onclick="{ parent.show }" data="{ JSON.stringify(emoji) }" class="emo emo-margin emoji s_{ emoji.name.replace(/\\+/, &quot;&quot;) }"></span>',function(t){this.emojis=[],this.show=function(t){return function(e){return t.current=JSON.parse(e.target.getAttribute("data"))}}(this),this.copy=function(){return function(){return document.getElementById("currentInput").select()}}(this),this.on("update",function(e){return function(){return e.emojis=t.data}}(this))}),riot.tag("finder",'<form class="pure-form"><input id="in" onkeyup="{ change }" autofocus="autofocus"></form></form><div class="emojis"><emojis data="{ emojis }"></emojis></div>',function(){var t,e;this.emojis=[],t=e=null,aja().method("get").url("/data/emojis.json").on("success",function(n){return function(r){var o,i;return e=function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)o=r[t],n.push({name:o.name,unicode:o.keywords[o.keywords.length-1],keywords:o.keywords.slice(0,-1)});return n}(),n.update({emojis:e}),t=new Fuse(e,{threshold:.1,distance:800,keys:["name","keywords"]}),i=location.hash.replace(/#/,""),document.getElementById("in").value=i,n.change({target:{value:i}})}}(this)).go(),this.change=function(n){var r;return r=n.target.value,this.update({emojis:0===r.length?e:t.search(r)}),location.hash=r}}),function(){riot.mount("*")}.call(this);